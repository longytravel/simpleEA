=== MathMax (Pages 1771-1772) ===

--- Page 1771 ---
Math Functions
© 2000-2025, MetaQuotes Ltd.
1771
MathMax
The function returns the maximal value of two values.
double  MathMax(
   double  value1,     // first value
   double  value2      // second value
   );
Parameters
value1
[in]  First numeric value.
value2
[in]  Second numeric value.
Return Value
The largest of the two values.
Note
Instead of MathMax() you can use fmax(). Functions fmax(), fmin(), MathMax(), MathMin() can
work with integer types without typecasting them to the type of double.
If parameters of different types are passed into a function, the parameter of the smaller type is
automatically cast to the larger type. The type of the return value corresponds to the larger type.
If data of the same type are passed, no casting is performed.
Example:
//--- input parameters
input int                  InpPeriod = 10;            // Moving average calculation pe
input ENUM_MA_METHOD       InpMethod = MODE_SMA;      // Moving average calculation me
input ENUM_APPLIED_PRICE   InpPrice  = PRICE_CLOSE;   // Moving average calculation pr
//+------------------------------------------------------------------+
//| Script program start function                                    |
//+------------------------------------------------------------------+
void OnStart()
  {
//--- if the moving average period is set to a value less than 1, then the default val
   int period=(InpPeriod<1 ? 10 : InpPeriod);
//--- create the Moving Average indicator handle
   int handle=iMA(Symbol(),Period(),period,0,InpMethod,InpPrice);
   if(handle==INVALID_HANDLE)
     {
      Print("Failed to create the Moving Average indicator handle. Error ",GetLastErro
      return;


--- Page 1772 ---
Math Functions
© 2000-2025, MetaQuotes Ltd.
1772
     }
//--- get the current Bid price
   double bid=0;
   ResetLastError();
   if(!SymbolInfoDouble(Symbol(),SYMBOL_BID,bid))
     {
      Print("Failed to get Bid price. Error ",GetLastError());
      return;
     }
//--- get the moving average value on the current bar
   double array[1];
   int    copied=CopyBuffer(handle,0,0,1,array);
   if(copied!=1)
     {
      Print("Failed to get Moving Average data. Error ",GetLastError());
      return;
     }
//--- get the highest price of the two (Bid price and Moving Average value) and displa
   double max_price=MathMax(bid,array[0]);
   PrintFormat("Bid: %.*f, Moving Average: %.*f, highest price of the two: %.*f",_Digi
   PrintFormat("Bid price %s moving average",(bid>array[0] ? "higher" : bid<array[0] ?
  }
